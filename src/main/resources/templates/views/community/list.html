<!-- 
  í•´ë‹¹ ê²Œì‹œíŒì˜ ê²Œì‹œê¸€ ëª©ë¡ë§Œ ë³´ì—¬ì£¼ëŠ” í…œí”Œë¦¿ì…ë‹ˆë‹¤.
-->

<!DOCTYPE html>
<html lang="kor" xmlns:th="http://www.thymeleaf.org" th:fragment="list">

<head>
  <style>
    tbody:hover {
      cursor: pointer;
    }

    .page-item {
      border: none;
    }

    .page-link {
      color: white;
      background-color: #5c8984;
      border: none;
    }

    .ud-widget-title {
      font-size: 60px;
      font-weight: bolder;
      color: #5c8984;
      margin-bottom: 1rem;
      text-align: left;
      text-decoration: none;
    }

    a {
      text-decoration: none;
      color: #5c8984;
    }
  </style>
</head>

<body>
  <!-- ====== ë¦¬ìŠ¤íŠ¸ Start ====== -->
  <section class="container ud-features">

    <!--ê²Œì‹œíŒ ì´ë™ ë²„íŠ¼-->
    <div class="row justify-content-center mb-1 pb-1"
      th:if="${board == 'admin_announcement' or board == 'user_question'}" th:hidden="true">
      <div class="mb-4 text-center">
        <button class="btn btn-primary" type="button" style="cursor: pointer;
        background-color: #5c8984;border: none; color: white; margin: 1px;"
          onclick="location.href='board.comm?board=best'">ë² ìŠ¤íŠ¸</button>
        <button class="btn btn-primary" type="button" style="cursor: pointer;
        background-color: #5c8984;border: none; color: white; margin: 1px;"
          onclick="location.href='board.comm?board=tips_and_info'">ê¿€íŒ, ì •ë³´</button>
        <button class="btn btn-primary" type="button" style="cursor: pointer;
        background-color: #5c8984;border: none; color: white; margin: 1px;"
          onclick="location.href='board.comm?board=free_and_humor'">ììœ , ìœ ë¨¸</button>
      </div>
    </div>

    <!-- <h1 class="ud-widget-title mb-2">[[${board}]]</h1> -->
    <div th:switch="${board}">
      <h1 class="ud-widget-title mb-2" th:case="'best'"><a href="board.comm?board=best">ë² ìŠ¤íŠ¸</a></h1>
      <h1 class="ud-widget-title mb-2" th:case="'tips_and_info'"><a href="board.comm?board=tips_and_info">ê¿€íŒ, ì •ë³´</a>
      </h1>
      <h1 class="ud-widget-title mb-2" th:case="'free_and_humor'"><a href="board.comm?board=free_and_humor">ììœ , ìœ ë¨¸</a>
      </h1>
      <h1 class="ud-widget-title mb-2" th:case="'admin_announcement'"><a
          href="board.comm?board=admin_announcement">ê³µì§€ì‚¬í•­</a></h1>
      <h1 class="ud-widget-title mb-2" th:case="'user_question'"><a href="board.comm?board=user_question">ê±´ì˜ì‚¬í•­</a></h1>
    </div>

    <div style="height: 50px; margin-top: 10px; margin-bottom: 10px;">
      <h5>
        <a href="board.comm?board=tips_and_info" style="margin: 10px;">ê¿€íŒ, ì •ë³´</a>
        <a href="board.comm?board=free_and_humor" style="margin: 10px;">ììœ , ìœ ë¨¸</a>
        <a href="board.comm?board=best" style="margin: 10px;">ë² ìŠ¤íŠ¸</a>
      </h5>
    </div>
    <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
    <div th:if="${session.loginUser != null && board != 'best' && board != 'admin_announcement'}"
      class="container mb-4">
      <div class="container mb-4">
        <div class="row-cols-sm-12">
          <button class="btn btn-primary" type="button"
            style="cursor: pointer; background-color: #5c8984;border: none; color: white; margin: 1px;"
            th:data-board="${board}"
            th:onclick="|location.href='write.comm?board=' + $(this).data('board')|">ê¸€ì“°ê¸°</button>
        </div>
      </div>
    </div>

    <table class="table table-hover">
      <thead>
        <tr style="cursor: default; background-color: lightgray;"> <!-- ì»¤ì„œ í˜¸ë²„ë˜ëŠ”ê±° ë¬´ì‹œí•˜ë ¤ê³ -->
          <th scope="col">ì œëª©</th>
          <th scope="col" style="width: 180px;">ê¸€ì“´ì´</th>
          <th scope="col" style="width: 150px;">ì‘ì„±ì¼</th>
          <th scope="col" style="width: 100px; text-align: center;">ì¡°íšŒ</th>
          <th scope="col" style="width: 50px; text-align: center;">ì¶”ì²œ</th>
        </tr>
      </thead>
      <tbody>
        <th:block th:if="${not #lists.isEmpty(list)}">
          <tr th:each="b : ${list}">
            <td hidden th:text="${b.boardNo}"></td>
            <td>
              <span
                th:text="${#strings.length(b.boardTitle) &gt; 50 ? #strings.substring(b.boardTitle, 0, 50) + '...' : b.boardTitle}"></span>
            </td>
            <td th:text="${b.memberNickname}"></td>
            <td th:text="${#dates.format(b.boardEnrollDate, 'yy-MM-dd HH:mm')}"></td>
            <td th:text="${b.boardViews}" style="text-align: center;"></td>
            <td th:text="${b.boardLikes}" style="text-align: center;"></td>
          </tr>
        </th:block>
      </tbody>
    </table>

    <nav aria-label="Standard pagination example">
      <!-- ë³€ìˆ˜ locë¡œ í˜„ì¬ í˜ì´ì§€ì˜ URIë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ctxëŠ” context-->
      <ul class="pagination justify-content-center mt-5" th:if="${pi.startPage != 0 and pi.endPage != 0}">
        <li class="page-item" th:if="${pi.currentPage > 1}">
          <a class="page-link" th:href="@{${ loc }(board=${board},page=${ pi.currentPage - 1 })}" aria-label="Previous">
            <!-- @{}ë¡œ thymeleafì˜ ë³€ìˆ˜ë¥¼ ì“´ë‹¤ê³  ì„ ì–¸í•©ë‹ˆë‹¤. ì†Œê´„í˜¸()ëŠ” íŒŒë¼ë¯¸í„°ë¡œ pageì— currentPage-1ì„ ë„£ëŠ”ë‹¤ëŠ” ë§ì…ë‹ˆë‹¤.ì´ì „ì— ì¼ë˜ goNextê°™ì€ ê±´ ì—†ìŠµë‹ˆë‹¤.-->
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>

        <th:block th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
          <!-- ì‹œì‘ê³¼ ëì„ ì •í•œê²ƒìœ¼ë¡œ, ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ë§ì…ë‹ˆë‹¤.
                numbersëŠ” thymeleafì˜ ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.-->
          <li class="page-item" th:classappend="${pi.currentPage == p} ? 'active' : null"><a class="page-link"
              th:href="@{${ loc }(board=${board},page=${p})}" th:text="${p}"></a>
          </li>
        </th:block>

        <li class="page-item" th:if="${pi.currentPage < pi.endPage}">
          <a class="page-link" th:href="@{${ loc }(board=${board},page=${ pi.currentPage + 1 })}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- ê²Œì‹œê¸€ ê²€ìƒ‰ì°½ -->
    <div class="container w-50 pt-3">
      <form id="search-form" method="get">
        <div class="input-group mb-3 mt-3" style="border: #5c8984 1px solid; border-radius: 5px;">
          <select name="search-option" class="btn" style="margin-right: 10px; color: #5c8984; font-weight: bolder;">
            <option value="all">ì „ì²´</option>
            <option value="title">ì œëª©</option>
            <option value="content">ë‚´ìš©</option>
            <option value="titleAndContent">ì œëª©+ë‚´ìš©</option>
            <option value="author">ì‘ì„±ì</option>
          </select>
          <input type="text" class="form-control" id="search-keyword" placeholder="2ê¸€ì ì´ìƒìœ¼ë¡œ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="submit">ê²€ìƒ‰</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script th:inline="javascript">
    /*<![CDATA[*/

    //ê²Œì‹œê¸€ í´ë¦­í•˜ë©´ ê²Œì‹œê¸€ë¡œ ì´ë™í•˜ê²Œ í•´ì£¼ëŠ” ìŠ¤í¬ë¦½íŠ¸
    window.onload = function () {
      const trs = document.querySelectorAll("tbody tr");
      trs.forEach((tr) => {
        tr.addEventListener("click", () => {
          const boardNo = tr.querySelectorAll("td")[0].innerText;
          console.log("ğŸš€ ~ file: list.html:89 ~ tr.addEventListener ~ boardNo:", boardNo)
          location.href = "post.comm?no=" + boardNo;
        });
      });
    };

    //ê²€ìƒ‰ì„ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸
    $(function () {
      $('#search-form').submit(function (event) {
        event.preventDefault();
        var searchOption = $('select[name="search-option"]').val();
        var searchKeyword = $('#search-keyword').val();
        var boardValue = /*[[${ board }]]*/1;
        if (boardValue.startsWith('"') && boardValue.endsWith('"')) {
          boardValue = boardValue.substring(1, boardValue.length - 1);
        }
        if (searchKeyword.length < 2) { // ê²€ìƒ‰ì–´ê°€ 2ê¸€ì ë¯¸ë§Œì¸ ê²½ìš°
          showFailure('ê²€ìƒ‰ ì‹¤íŒ¨', 'ê²€ìƒ‰ì–´ëŠ” 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return false; // ê²€ìƒ‰ ì·¨ì†Œ
        }
        //searchkeywordê°€ nullì´ ëœë‹¤ë©´ ê·¸ê±¸ ë¹ˆì¹¸ìœ¼ë¡œ ë°”ê¿”ì¤˜ì•¼ í•  ìˆ˜ë„.
        var url = 'board.comm?board=' + boardValue + '&searchOption=' + searchOption + '&searchKeyword=' + searchKeyword;
        window.location.href = url;
      });
    });
    /*]]>*/
  </script>

  <!-- ====== Features End ====== -->
</body>

</html>